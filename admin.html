<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
</head>
<body>
  <h1>Add Tournament</h1>
  <form id="tournamentForm">
    <input type="text" id="name" placeholder="Tournament Name" required><br>
    <input type="number" id="price" placeholder="Price" required><br>
    <input type="number" id="entryFee" placeholder="Entry Fee" required><br>
    <textarea id="rules" placeholder="Rules" required></textarea><br>
    <input type="text" id="admins" placeholder="Admins" required><br>
    <button type="submit">Upload</button>
  </form>

  <h2>Existing Tournaments</h2>
  <div id="tournamentList"></div>

  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
  
  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_BUCKET",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    firebase.auth().signInAnonymously();

    // Add Tournament
    document.getElementById("tournamentForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value;
      const price = document.getElementById("price").value;
      const entryFee = document.getElementById("entryFee").value;
      const rules = document.getElementById("rules").value;
      const admins = document.getElementById("admins").value;

      await db.collection("tournaments").add({
        name,
        price,
        entryFee,
        rules,
        admins
      });

      alert("Tournament added successfully!");
      document.getElementById("tournamentForm").reset();
      loadTournaments();
    });

    // Load & Display Tournaments with Delete Button
    async function loadTournaments() {
      const snapshot = await db.collection("tournaments").get();
      let output = "";
      snapshot.forEach(doc => {
        const t = doc.data();
        output += `
          <div style="border:1px solid #ccc; padding:10px; margin:10px;">
            <b>${t.name}</b><br>
            Price: ${t.price} | Entry Fee: ${t.entryFee}<br>
            Rules: ${t.rules}<br>
            Admins: ${t.admins}<br>
            <button onclick="deleteTournament('${doc.id}')">Delete</button>
          </div>
        `;
      });
      document.getElementById("tournamentList").innerHTML = output;
    }

    // Delete Tournament
    async function deleteTournament(id) {
      if (confirm("Are you sure you want to delete this tournament?")) {
        await db.collection("tournaments").doc(id).delete();
        alert("Tournament deleted!");
        loadTournaments();
      }
    }

    loadTournaments();
  </script>
</body>
</html>
